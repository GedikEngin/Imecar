const db = new sqlite3.Database(
	"./reportDB.sqlite",
	sqlite3.OPEN_READWRITE | sqlite3.OPEN_CREATE,
	(err) => {
		if (err) {
			console.error("Error opening database " + err.message);
		} else {
			console.log("Connected to the SQLite database.");
			// Create tables if they don't exist

			// Create dailyReport table
			db.run(`CREATE TABLE IF NOT EXISTS employees (
                employeeID INTEGER PRIMARY KEY AUTOINCREMENT,
                employeeName TEXT
            );
            `);

			db.run(`CREATE TABLE IF NOT EXISTS weekOverview (
                weekID INTEGER PRIMARY KEY AUTOINCREMENT,
                weekBeginning DATE,
                employeeName TEXT,
                FOREIGN KEY (employeeName) REFERENCES employees(employeeName)
            );
            `);

			db.run(`CREATE TABLE IF NOT EXISTS dailyTasks (
                taskID INTEGER PRIMARY KEY AUTOINCREMENT,
                weekID INTEGER,
                dayOfWeek INTEGER,
                taskContent TEXT,
                FOREIGN KEY (weekID) REFERENCES weekOverview(weekID)
            );
            `);

			db.run(`CREATE TABLE IF NOT EXISTS dailyReport (
                reportID INTEGER PRIMARY KEY AUTOINCREMENT,
                taskID INTEGER,
                reportContent TEXT,
                reportDate DATE,
                FOREIGN KEY (taskID) REFERENCES dailyTasks(taskID)
            );
            `);
		}
	}
);